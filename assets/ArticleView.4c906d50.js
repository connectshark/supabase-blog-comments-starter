import{u as B,a as I,b as L,r as x,w as M,c as N,d as U,o as s,e as o,f as t,g as e,t as c,F as b,h as m,v as D,i as p,j as E,k as F,l as H,m as T,n as j,p as q}from"./index.09f42a99.js";const z={class:"container max-w-2xl mx-auto"},$={key:0},G=e("p",{class:"text-center"},[e("i",{class:"bx bx-md bx-loader-alt bx-spin"})],-1),J=[G],K={key:1},O={class:"py-10 text-center text-2xl text-white bg-primary shadow-[0_0_0_100vmax_#7a6ae1] path"},P={class:"py-4 break-words"},Q=e("h3",{class:"text-center text-2xl text-white bg-primary"},"\u6587\u7AE0\u7DE8\u8F2F",-1),R={class:"py-3"},W=["disabled"],X=e("label",{class:"inline-block ml-4",for:"Is_published"},"\u662F\u5426\u767C\u4F48",-1),Y=e("h3",{class:"text-center text-2xl text-white bg-primary"},"\u8A55\u8AD6",-1),Z={key:0,class:"text-center"},ee=e("i",{class:"bx bx-md bx-loader-alt bx-spin"},null,-1),te=[ee],se={class:"leading-loose"},oe={class:"leading-loose"},ie={key:0,class:"text-right"},ae=["onClick"],ne=["onSubmit"],le=e("h3",{class:"text-center text-2xl text-white bg-primary mb-5"},"\u65B0\u589E\u8A55\u8AD6",-1),de=["disabled"],re={class:"text-right"},ce={key:0,type:"submit",class:"bg-primary text-white p-3 rounded-xl"},_e={key:0},ue=e("i",{class:"bx bx-loader bx-spin"},null,-1),pe=[ue],he={key:1},me={__name:"ArticleView",props:{id:String},setup(y){const _=y,i=B(),{results:n,loading:g}=I({selectString:"*",targetId:_.id}),{updateArticle:k,loading:v}=L({user_id:i.id}),l=x(!1);M(()=>{var u;l.value=(u=n.value)!=null&&u.is_published?n.value.is_published:!1});const w=async()=>{await k({is_published:l.value},{article_id:_.id})},d=x(""),{addComment:f,loading:h,deleteComment:C,comments:S}=N({article_id:_.id}),V=async()=>{await f({content:d.value,user_id:i.id}),d.value=""};return(u,r)=>{const A=U("router-link");return s(),o("main",z,[t(g)?(s(),o("div",$,J)):(s(),o("article",K,[e("h1",O,c(t(n).title),1),e("p",P,c(t(n).content),1)])),t(n).user_id===t(i).id?(s(),o(b,{key:2},[Q,e("div",null,[e("p",R,[m(e("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>l.value=a),disabled:t(v),onChange:w,type:"checkbox",id:"Is_published"},null,40,W),[[D,l.value]]),X])])],64)):p("",!0),Y,e("ul",null,[t(h)?(s(),o("li",Z,te)):p("",!0),(s(!0),o(b,null,E(t(S),a=>(s(),o("li",{key:a.user_id,class:"bg-gray-200 p-5 mb-5"},[e("p",se,c(a.profiles.username),1),e("p",oe,c(a.content),1),t(i).id&&t(i).id===t(n).user_id||t(i).id&&t(i).id===a.user_id?(s(),o("p",ie,[e("button",{onClick:xe=>t(C)({id:a.id}),type:"button",class:"text-primary underline"},"\u522A\u9664",8,ae)])):p("",!0)]))),128))]),e("form",{onSubmit:j(V,["prevent"])},[le,m(e("textarea",{required:"",minlength:"1","onUpdate:modelValue":r[1]||(r[1]=a=>d.value=a),disabled:!t(i).id,class:"disabled:bg-gray-200 w-full resize-none rounded-lg border-2 border-gray-300 focus:border-primary appearance-none outline-none p-6",cols:"30",rows:"3"},null,8,de),[[F,d.value]]),e("div",re,[t(i).id?(s(),o("button",ce,[t(h)?(s(),o("span",_e,pe)):(s(),o("span",he,"\u9001\u51FA"))])):(s(),H(A,{key:1,class:"text-primary underline",to:"/login"},{default:T(()=>[q("\u767B\u5165\u767C\u8868\u8A55\u8AD6")]),_:1}))])],40,ne)])}}};export{me as default};
